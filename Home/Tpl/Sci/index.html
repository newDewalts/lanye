<style>
.main{
	width: 1200px;
	margin:0 auto;
}
table{
	width: 100%;
}

.sci_div {
    font-size: 13px;
    width: 820px;
    margin:30px auto;
    padding: 10px 30px;
    border: 1px solid #d4d4d4;
    border-radius: 5px;
}

.layui-form-item {
    margin-bottom: 15px;
    clear: both;
}

.sci_title {
    font-size: 20px;
    text-align: center;
    line-height: 45px;
}

.layui-form-label {
    width: 140px;
    padding: 8px 15px;
    height: 41px;
    line-height: 20px;
    border-width: 1px;
    border-style: solid;
    border-radius: 2px 0 0 2px;
    text-align: center;
    background-color: #FBFBFB;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    box-sizing: border-box;
    border-color: #e6e6e6;
    float: left;
    display: block;
}

.layui-input-block {
    margin-left: 110px;
    left: -1px;
    min-height: 36px;
}

.l-input {
    border-radius: 0 2px 2px 0;
    height: 41px;
    line-height: 1.3;
    line-height: 38px\9;
    border-width: 1px;
    border-style: solid;
    background-color: #fff;
    display: block;
    width: 660px;
    padding-left: 10px;
    border-color: #e6e6e6;
    outline: 0;
    -webkit-appearance: none;
    transition: all .3s;
    -webkit-transition: all .3s;
    box-sizing: border-box;
}

.sci_select {
    border-radius: 0 2px 2px 0;
    height: 41px;
    line-height: 1.3;
    line-height: 38px\9;
    border-width: 1px;
    border-style: solid;
    background-color: #fff;
    display: block;
    width: 312px;
    padding-left: 10px;
    border-color: #e6e6e6;
    display: inline-block;
    margin-left: 16px;
}

.select2 {
    width: 660px;
    margin-left: 0px;
}

.SCI_IF {
    width: 190px;
    float: left;
}

.if2 {
    margin-left: 20px;
}

.if-center {
    float: left;
    font-size: 20px;
    line-height: 41px;
    text-align: center;
    padding-left: 19px;
}

.sci-btn {
    display: inline-block;
    height: 41px;
    line-height: 38px;
    padding: 0 60px;
    background-color: #2779b5;
    color: #fff;
    white-space: nowrap;
    text-align: center;
    font-size: 14px;
    border: none;
    border-radius: 2px;
    cursor: pointer;
}

.btn-reset {
    border: 1px solid #C9C9C9;
    background-color: #fff;
    color: #555;
    margin-left: 25px;
}

.sci_data {
	margin-top: 5px;
    border-width: 1px;
    border-style: solid;
    border-color: #e6e6e6;
    border-bottom: none;
    border-right: none; 
    text-align: center;
}

.layui-table-header {
    border-width: 0 0 1px;
    border-style: solid;
    border-color: #e6e6e6;
    background-color: #f2f2f2
}

.layui-tables th {
    border-top: none;
    border-left: none;
    position: relative;
    min-height: 20px;
    line-height: 20px;
    font-size: 14px;
    border-right: 1px solid #e6e6e6;
    text-align: center;
}
.layui-table-cells {
    height: 100%;
    padding: 10px 15px;
    position: relative;
    text-overflow: ellipsis;
    box-sizing: border-box;
	word-break: break-all;
}

.layui-tables td{
	border-width: 1px;
    border-style: solid;
    border-color: #e6e6e6;
    padding: 5px 0;
    border-top: none;
    border-left: none;
}
.result{
	line-height: 50px;
	font-size: 20px;
	margin-left: 20px;
    padding: 0 10px;
    font-weight: 300;
    margin-bottom: 12px;
}
.data_div{
	font-size: 12px;
}
fieldset{
	margin-top: 45px;
	border: none;
	border-top: 1px solid #e6e6e6;
}
.btn{
	display: inline-block;
	border-radius: 2px;
    cursor: pointer;
    white-space: nowrap;
    text-align: center;
    border: 1px solid #C9C9C9;
    height: 24px;
    line-height: 24px;
    padding: 0 15px;
    font-size: 12px;
}
.btn2{
    background-color: #2779b5;
    color: #fff  !important;
}
.btn1{
    background-color: #fff;
    color: #555  !important;
}
.detail{
	text-align: left;
	font-size: 13px;
	white-space: pre-wrap;
    word-wrap: break-word;
    word-break: break-all;
}
.bg-gray{
	background: #F0F0F0;
	width: 166px;
}
.detail_url{
	float: 	left;
}

</style>

<script src="__PUBLIC__/Js/highcharts.js"></script>
<div class="page-banner" >
    <img src="__PUBLIC__/images/banner-sci.png"  />
</div>
<div class="container-box" >
     <div class="page-menu" > 当前位置: <a href="/" >首页</a> > <a href="/sci/index.htm" >SCI影响因子</a> </div>
 </div>        
<div class="main">

    <div class="sci_div">
        <div>
            <div class="sci_title">
                <p> SCI影响因子智能查询系统</p>
            </div>
            <form id="sciform" action="{:U('Sci/index')}" method="post" accept-charset="utf-8">
                <div class="layui-form-item">
                    <label class="layui-form-label">SCI关键词：</label>
                    <div class="layui-input-block">
                        <input type="text" name="search_name" placeholder="请输入SCI关键词,支持模糊查询" class="l-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">SCI领域：</label>
                    <div class="layui-input-block">
                        <select name="cat_select1" id="cat_select1" class="sci_select">
                        	<option value="">请选择大类</option>
                           <foreach name="cat_top" item="vo" >
								<option value="{$vo.id}">{$vo.name}</option>
                           </foreach>
                        </select>
                        <select name="cat_select2" id="cat_select2" class="sci_select">
                        	<option value="">请选择二级别分类</option>
                           
                        </select>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">IF范围：</label>
                    <div class="layui-input-block">
                        <input type="number" name="search_if1" placeholder="填数字" class="SCI_IF l-input">
                        <span class="if-center">—</span>
                        <input type="number" name="search_if2" placeholder="填数字" class="SCI_IF l-input if2">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">排列方式：</label>
                    <div class="layui-input-block">
                        <select name="order_select" id="" class="sci_select select2">
                            <option value="article_num_b">按年文章量从多到少</option>
                            <option value="article_num_s">按年文章量从少到多</option>
                            <option value="medSci_b">按Sci指数从高到低</option>
                            <option value="medSci_s">按Sci指数从低到高</option>
                            <option value="if_b">IF上升速度从大到小</option>
                            <option value="if_s">IF上升速度从小到大</option>
                        </select>
                    </div>
                </div>
                <div class="layui-form-item">
                    <button type="submit" class="sci-btn">我 要 查 询</button>
                    <button type="reset" class=" sci-btn btn-reset">重 置</button>
                </div>
            </form>
        </div>
		
		<div style="color: gray;font-size: 15px;">一共收录SCI：16225份</div>

		<if condition="!isset($detail)">
			<div>
				<fieldset>
					<legend class="result">查询结果：</legend>
				</fieldset>
			</div>
		
	        <div class="sci_data">  
	            <div class="layui-table-header">
	                <table cellspacing="0" cellpadding="0" border="0" class="layui-tables">
	                    <thead>
	                        <tr>
	                            <th style="width: 166px;">
	                                <div class="layui-table-cells"><span>缩写名/全名</span></div>
	                            </th>
	                            <th style="width: 93px;">
	                                <div class="layui-table-cells"><span>ISSN号</span></div>
	                            </th>
	                            <th style="width: 93px;">
	                                <div class="layui-table-cells"><span>年文章</span></div>
	                            </th>
	                            <th style="width: 93px;">
	                                <div class="layui-table-cells"><span>Sci指数</span></div>
	                            </th>
	                            <th style="width: 93px;">
	                                <div class="layui-table-cells"><span>投稿难易</span></div>
	                            </th>
	                            <th style="width: 93px;">
	                                <div class="layui-table-cells"><span>一审周期</span></div>
	                            </th>
	                            <th style="width: 90px;">
	                                <div class="layui-table-cells"><span>主页</span></span></div>
	                            </th>
	                            <th style="width: 90px;">
	                                <div class="layui-table-cells"><span>详情</span></div>
	                            </th>
	                        </tr>
	                    </thead>
	                </table>
	            </div>
	            <div class="data_div">
	                <table cellspacing="0" cellpadding="0" border="0" class="layui-tables">
	                    <tbody>
	                    	<foreach name="impact_list" item="vo" >
		                        <tr data-index="0" class="">
		                            <td style="width: 166px;">
		                                <div class="layui-table-cells">{$vo.name}</div>
		                            </td>
		                            <td style="width: 93px;">
		                                <div class="layui-table-cells">{$vo.issn}</div>
		                            </td>
		                            <td style="width: 93px;">
		                                <div class="layui-table-cells">{$vo.article_num}</div>
		                            </td>
		                            <td style="width: 93px;">
		                                <div class="layui-table-cells">{$vo.medSci}</div>
		                            </td>
		                            <td style="width: 93px;">
		                                <div class="layui-table-cells">{$vo.how}</div>
		                            </td>
		                            <td style="width: 93px;">
		                                <div class="layui-table-cells">{$vo.first}</div>
		                            </td>
		                            <td style="width: 90px;">
		                                <div class="layui-table-cells"><a href="{$vo.index}" class="btn1 btn" target="_blank">主页</a></div>
		                            </td>
		                            <td style="width: 90px;">
		                                <div class="layui-table-cells"><a href="{:U('Sci/index',array('id'=>$vo['id']))}" target="_blank" class="btn2 btn">详情</a></div>
		                            </td>
		                           
		                        </tr>
	                        </foreach>
	                    </tbody>
	                </table>
	            </div>
	        </div>
	    <else /> 
	    	<div>
				<fieldset>
					<legend class="result">查看详情：</legend>
				</fieldset>
			</div>

			<div class="sci_data">  
	            <div class="data_div">
	                <table cellspacing="0" cellpadding="0" border="0" class="layui-tables">
	                    <tbody>	                    	
	                        <tr data-index="0" class="">
	                            <td class="bg-gray">
	                                <div class="layui-table-cells">缩写名/全名</div>
	                            </td>
	                            <td >
	                                <div class="layui-table-cells detail" >{$detail.name}</div>
	                            </td>
	                        </tr>

	                        <tr data-index="0" class="">
	                            <td class="bg-gray">
	                                <div class="layui-table-cells">ISSN号</div>
	                            </td>
	                            <td >
	                                <div class="layui-table-cells detail" >{$detail.issn}</div>
	                            </td>
	                        </tr>
							
							<tr data-index="0" class="">
	                            <td class="bg-gray">
	                                <div class="layui-table-cells">Sci指数</div>
	                            </td>
	                            <td >
	                                <div class="layui-table-cells detail" >{$detail.medSci}</div>
	                            </td>
	                        </tr>

	                        <tr data-index="0" class="">
	                            <td class="bg-gray">
	                                <div class="layui-table-cells">被收录情况</div>
	                            </td>
	                            <td >
	                                <div class="layui-table-cells detail" >{$detail.included}</div>
	                            </td>
	                        </tr>

	                        <tr data-index="0" class="">
	                            <td class="bg-gray">
	                                <div class="layui-table-cells">投稿难易</div>
	                            </td>
	                            <td >
	                                <div class="layui-table-cells detail" >{$detail.how}</div>
	                            </td>
	                        </tr>

	                        <tr data-index="0" class="">
	                            <td class="bg-gray">
	                                <div class="layui-table-cells">出版周期</div>
	                            </td>
	                            <td >
	                                <div class="layui-table-cells detail" >{$detail.out_time}</div>
	                            </td>
	                        </tr>

	                        <tr data-index="0" class="">
	                            <td class="bg-gray">
	                                <div class="layui-table-cells">一审周期</div>
	                            </td>
	                            <td >
	                                <div class="layui-table-cells detail" >{$detail.first}</div>
	                            </td>
	                        </tr>
							
							<tr data-index="0" class="">
	                            <td class="bg-gray">
	                                <div class="layui-table-cells">年文章</div>
	                            </td>
	                            <td >
	                                <div class="layui-table-cells detail" >{$detail.article_num}</div>
	                            </td>
	                        </tr>

	                        <tr data-index="0" class="">
	                            <td class="bg-gray">
	                                <div class="layui-table-cells">CiteScore分区</div>
	                            </td>
	                            <td >
	                                <div class="layui-table-cells detail" >{$detail.CiteScore}</div>
	                            </td>
	                        </tr>

	                        <tr data-index="0" class="">
	                            <td class="bg-gray">
	                                <div class="layui-table-cells">CiteScore趋势</div>
	                            </td>
	                            <td >
	                                <!-- <div class="layui-table-cells detail" >{$detail.CiteScore_num}</div> -->

	                             <div id="container" style="width: 550px; height: 400px; margin: 0 auto"></div>
	                            </td>
	                        </tr>
	                     
	                        <tr data-index="0" class="">
	                            <td class="bg-gray">
	                                <div class="layui-table-cells">IF值</div>
	                            </td>
	                            <td >
	                                <div class="layui-table-cells detail" >{$detail.if}</div>
	                            </td>
	                        </tr>

	                        <tr data-index="0" class="">
	                            <td class="bg-gray">
	                                <div class="layui-table-cells">出版社或管理机构</div>
	                            </td>
	                            <td >
	                                <div class="layui-table-cells detail" >{$detail.publishing}</div>
	                            </td>
	                        </tr>

	                        <tr data-index="0" class="">
	                            <td class="bg-gray">
	                                <div class="layui-table-cells">杂志简介/稿件收录要求</div>
	                            </td>
	                            <td >
	                                <div class="layui-table-cells detail" >{$detail.description}</div>
	                            </td>
	                        </tr>

	                        <tr data-index="0" class="">
	                            <td class="bg-gray">
	                                <div class="layui-table-cells">杂志主页/投稿链接</div>
	                            </td>
	                            <td >
	                            	<notempty name="detail.index">
	                                	<div class="layui-table-cells detail detail_url" ><a href="{$detail.index}" class="btn1 btn" target="_blank">查看主页</a></div>
	                                </notempty>
									
									<notempty name="detail.tg_url">
	                                	<div class="layui-table-cells detail detail_url" ><a href="{$detail.tg_url}" class="btn1 btn" target="_blank">投稿链接</a></div>
	                                </notempty>
	                            </td>


	                        </tr>


	                    </tbody>
	                </table>
	            </div>
	        </div>
	    </if>   
    </div>
</div>

<script>
	// 栏目高亮
	$('.nav_on').removeClass('nav_on');
	$('.nav_sci').addClass('nav_on')

	$('#cat_select1').change(function(event) {
		var select2val = $('#cat_select1').val();
		if(!select2val){
			$('#cat_select2').html("<option value=''>请选择二级别分类</option>");
			$('#cat_select2').attr('required',false);
		}else{
			$.post("{:U('sci/ajaxCat')}", {id: select2val}, function(data) {
				data = JSON.parse(data);
				var select_html = '<option value="">请选择二级别分类</option>';
				for(var i=0;i<data.length;i++){
				    select_html += "<option value='"+data[i].id +"'>"+data[i].name+"</option>";
				}
				$('#cat_select2').html(select_html);
			});

			$('#cat_select2').attr('required',true);
		}


	});
</script>

<!-- 折线图 -->
<script language="JavaScript">
$(document).ready(function() {   
   var title = {
      text: 'CiteScore趋势'   
   };
   var subtitle = {
      text: 'Source: http://www.sciedit.cn/'
   };
   var xAxis = {
      categories: ['2013','2014','2015','2016','2017']
   };
   var yAxis = {
      title: {
         text: ' '
      }
   };
   var plotOptions = {
      line: {
         dataLabels: {
            enabled: true
         },   
         enableMouseTracking: false
      }
   };
   var series= [{
   		 name: "{$detail.name}",
         data: [
         	<?php
         	foreach ($detail['CiteScore_num'] as $key => $value) {
				echo $value.',';
			}
         	?>
         ] 
      }
   ];
   
   var json = {};

   json.title = title;
   json.subtitle = subtitle;
   json.xAxis = xAxis;
   json.yAxis = yAxis;  
   json.series = series;
   json.plotOptions = plotOptions;
   $('#container').highcharts(json);
   $('.highcharts-credits').html(' ')
});
</script>