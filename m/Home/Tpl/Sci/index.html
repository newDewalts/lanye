<style>
.main{
	padding-bottom: 2rem; 
}
.sci_div{
    background:#fff;
}
.sci_title {
    font-size: 1.5rem;
    text-align: center;
    line-height: 4rem;
    font-weight: bold;
}

.layui-form-label {
    font-size: 1.4rem;
    padding-left: 1.4rem;
    line-height: 3rem;
}

.layui-form-item {
    margin-top: 0.4rem;
}

.l-input {
    background: #fff;
    height: 3rem;
    border-radius: 0 2px 2px 0;
    border: 1px solid #E0E0E0;
    width: 90%;
    padding-left: 1.4rem;
}

.SCI_IF {
    width: 12.1rem;
}

.if-center {
    padding:0 1.15rem;
    font-size: 0.6rem;
}

.sci_select {
    border-radius: 0 2px 2px 0;
    height: 3rem;
    line-height: 1.3;
    border-width: 1px;
    border-style: solid;
    background-color: #fff;
    width: 14.6rem;
    padding-left: 0.5rem;
    border-color: #e6e6e6;
    display: inline-block;
    margin-right: 0.8rem;
}


.select2 {
    width: 30.3rem;
}

.sci-btn {
    width: 11rem;
    height: 2.8rem;
    border-radius: 2rem;
    border: none;
    color: #fff;
    margin: 1rem 0rem 1rem 2.1rem;
    background: #ff5858;
    font-size: 1.3rem;
    cursor: pointer;
}

.btn-reset {
    margin: 1rem 0rem 1rem 1rem;
    background: #BAB8B9;
}

fieldset{
	margin-top: 45px;
	border: none;
	border-top: 1px solid #e6e6e6;
	width: 92%;
	margin:0 auto;
}
.result {
    line-height: 2rem;
    font-size: 0.75rem;
    margin-left: 1rem;
    padding: 0 0.5rem;
    font-weight: 300;
    margin-bottom: 0.3rem;
}

.sci_data {
    border-width: 1px;
    border-style: solid;
    border-color: #e6e6e6;
    border-bottom: none;
    border-right: none;
    text-align: center;
    width: 95%;
    margin:0 auto;
}
.layui-tables th {
    border-top: none;
    border-left: none;
    position: relative;
    line-height: 0.8rem;
    font-size: 14px;
    border-right: 1px solid #e6e6e6;
    text-align: center;
}
.layui-table-header{
	border-width: 0 0 1px;
    border-style: solid;
    border-color: #e6e6e6;
    background-color: #f2f2f2
}
.layui-table-cells {
    height: 100%;
    padding: 0.3rem 0.6rem;
    position: relative;
    text-overflow: ellipsis;
    box-sizing: border-box;
	word-break: break-all;
}

.layui-tables td{
	border-width: 1px;
    border-style: solid;
    border-color: #e6e6e6;
    padding: 5px 0;
    border-top: none;
    border-left: none;
}
table{
	width: 100%;
}
th{
	font-weight: 500;
}

.bg-gray {
    background: #F0F0F0;
    width: 5rem;
}

.detail {
    text-align: left;
    font-size: 13px;
    white-space: pre-wrap;
    word-wrap: break-word;
    word-break: break-all;
}

.sci_box{
    padding:0.5rem 2rem;
}
.sci_title1{
    font-size:1.3rem;
    margin:0.8rem 0;
}
</style>
<!-- <script src="__PUBLIC__/Js/highcharts.js"></script> -->
<div class="main">
    <div class='page_menu' ><img src='__APP__/Home/Tpl/Public/images/home_icon.png' class="home-icon" ><a href="/"> 首页</a> > 期刊智能查询系统  </div>
    <div class="sci_div">
        <div>
            <div class="sci_title">
                <p>蓝译 SCI 2018年期刊智能查询系统(2017年度)</p>
            </div>
            <form id="sciform" action="{:U('Sci/index')}" method="post" accept-charset="utf-8">
                <div class='sci_box' >
                    <div class="layui-form-item">
                        <div class='sci_title1' >SCI关键词：</div>
                    </div>
                    <div>
                        <input type="text" name="search_name" placeholder="请输入SCI关键词,支持模糊查询" class="l-input">
                    </div>
                    <div class="sci_title1">SCI领域：</div>
                    <div >
                        <select name="cat_select1" id="cat_select1" class="sci_select">
                            <option value="">请选择大类</option>
                            <foreach name="cat_top" item="vo">
                                <option value="{$vo.id}">{$vo.name}</option>
                            </foreach>
                        </select>
                        <select name="cat_select2" id="cat_select2" class="sci_select">
                            <option value="">请选择二级别分类</option>
                        </select>
                    </div>
                    <div class="sci_title1">IF范围：</div>
                    <div >
                        <input type="number" name="search_if1" placeholder="填数字" class="SCI_IF l-input"><div class="layui-inline  if-center">—</div><input type="number" name="search_if2" placeholder="填数字" class="SCI_IF l-input if2">
                    </div>
                     <div class="sci_title1">排列方式：</div>
                    <div  >
                        <select name="order_select"  class="sci_select select2">
                            <option value="article_num_b">按年文章量从多到少</option>
                            <option value="article_num_s">按年文章量从少到多</option>
                            <option value="medSci_b">按蓝译Sci指数从高到低</option>
                            <option value="medSci_s">按蓝译Sci指数从低到高</option>
                            <option value="if_b">IF上升速度从大到小</option>
                            <option value="if_s">IF上升速度从小到大</option>
                        </select>
                    </div>   
                </div>    
                    
                <div class="layui-form-item">
                    <button type="submit" class="sci-btn">我 要 查 询</button>
                    <button type="reset" class=" sci-btn btn-reset">重 置</button>
                </div>
            </form>
        </div>
        <if condition="!isset($detail)">
            <div>
                <fieldset>
                    <legend class="result">查询结果：</legend>
                </fieldset>
            </div>
            <div class="sci_data">
                <div class="layui-table-header">
                    <table cellspacing="0" cellpadding="0" border="0" class="layui-tables">
                        <thead>
                            <tr>
                                <th style="width: 50%;">
                                    <div class="layui-table-cells"><span>缩写名/全名</span></div>
                                </th>
                                <th style="width: 30%;">
                                    <div class="layui-table-cells"><span>ISSN号</span></div>
                                </th>
                                
                                <th style="width: 25%;">
                                    <div class="layui-table-cells"><span>详情</span></div>
                                </th>
                            </tr>
                        </thead>
                    </table>
                </div>
                <div class="data_div">
                    <table cellspacing="0" cellpadding="0" border="0" class="layui-tables">
                        <tbody>
                            <foreach name="impact_list" item="vo">
                                <tr data-index="0" class="">
                                    <td style="width: 50%;">
                                        <div class="layui-table-cells">{$vo.name}</div>
                                    </td>
                                    <td style="width: 30%;">
                                        <div class="layui-table-cells">{$vo.issn}</div>
                                    </td>
                                    <td>
                                        <div class="layui-table-cells"><a href="{:U('Sci/index',array('id'=>$vo['id']))}"  class="btn2 btn">详情</a></div>
                                    </td>
                                </tr>
                            </foreach>
                        </tbody>
                    </table>
                </div>
            </div>
            <else />
            <div>
                <fieldset>
                    <legend class="result">查看详情：</legend>
                </fieldset>
            </div>
            <div class="sci_data">
                <div class="data_div">
                    <table cellspacing="0" cellpadding="0" border="0" class="layui-tables">
                        <tbody>
                            <tr data-index="0" class="">
                                <td class="bg-gray">
                                    缩写名/全名
                                </td>
                                <td >
                                   {$detail.name}
                                </td>
                            </tr>
                            <tr data-index="0" class="">
                                <td class="bg-gray">
                                    <div class="layui-table-cells">ISSN号</div>
                                </td>
                                <td>
                                    <div class="layui-table-cells detail">{$detail.issn}</div>
                                </td>
                            </tr>
                            <tr data-index="0" class="">
                                <td class="bg-gray">
                                    <div class="layui-table-cells">蓝译Sci指数</div>
                                </td>
                                <td>
                                    <div class="layui-table-cells detail">{$detail.medSci}</div>
                                </td>
                            </tr>
                            <tr data-index="0" class="">
                                <td class="bg-gray">
                                    <div class="layui-table-cells">被收录情况</div>
                                </td>
                                <td>
                                    <div class="layui-table-cells detail">{$detail.included}</div>
                                </td>
                            </tr>
                            <tr data-index="0" class="">
                                <td class="bg-gray">
                                    <div class="layui-table-cells">投稿难易</div>
                                </td>
                                <td>
                                    <div class="layui-table-cells detail">{$detail.how}</div>
                                </td>
                            </tr>
                            <tr data-index="0" class="">
                                <td class="bg-gray">
                                    <div class="layui-table-cells">出版周期</div>
                                </td>
                                <td>
                                    <div class="layui-table-cells detail">{$detail.out_time}</div>
                                </td>
                            </tr>
                            <tr data-index="0" class="">
                                <td class="bg-gray">
                                    <div class="layui-table-cells">一审周期</div>
                                </td>
                                <td>
                                    <div class="layui-table-cells detail">{$detail.first}</div>
                                </td>
                            </tr>
                            <tr data-index="0" class="">
                                <td class="bg-gray">
                                    <div class="layui-table-cells">年文章</div>
                                </td>
                                <td>
                                    <div class="layui-table-cells detail">{$detail.article_num}</div>
                                </td>
                            </tr>
                            <tr data-index="0" class="">
                                <td class="bg-gray">
                                    <div class="layui-table-cells">CiteScore分区</div>
                                </td>
                                <td>
                                    <div class="layui-table-cells detail">{$detail.CiteScore}</div>
                                </td>
                            </tr>
                            <tr data-index="0" class="">
                                <td class="bg-gray">
                                    <div class="layui-table-cells">CiteScore趋势</div>
                                </td>
                                <td>
                                    <!-- <div class="layui-table-cells detail" >{$detail.CiteScore_num}</div> -->
                                    <div id="container" style=""></div>
                                </td>
                            </tr>
                            <tr data-index="0" class="">
                                <td class="bg-gray">
                                    <div class="layui-table-cells">IF值</div>
                                </td>
                                <td>
                                    <div class="layui-table-cells detail">{$detail.if}</div>
                                </td>
                            </tr>
                            <tr data-index="0" class="">
                                <td class="bg-gray">
                                    <div class="layui-table-cells">出版社或管理机构</div>
                                </td>
                                <td>
                                    <div class="layui-table-cells detail">{$detail.publishing}</div>
                                </td>
                            </tr>
                            <tr data-index="0" class="">
                                <td class="bg-gray">
                                    <div class="layui-table-cells">杂志简介/稿件收录要求</div>
                                </td>
                                <td>
                                    <div class="layui-table-cells detail">{$detail.description}</div>
                                </td>
                            </tr>
                            <tr data-index="0" class="">
                                <td class="bg-gray">
                                    <div class="layui-table-cells">杂志主页/投稿链接</div>
                                </td>
                                <td>
                                    <notempty name="detail.index">
                                        <div class="layui-table-cells detail detail_url"><a href="{$detail.index}" class="btn1 btn" target="_blank">查看主页</a></div>
                                    </notempty>
                                    <notempty name="detail.tg_url">
                                        <div class="layui-table-cells detail detail_url"><a href="{$detail.tg_url}" class="btn1 btn" target="_blank">投稿链接</a></div>
                                    </notempty>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </if>
    </div>
</div>
<script>
$('#cat_select1').change(function(event) {
    var select2val = $('#cat_select1').val();
    if (!select2val) {
        $('#cat_select2').html("<option value=''>请选择二级别分类</option>");
        $('#cat_select2').attr('required', false);
    } else {
        $.post("{:U('sci/ajaxCat')}", { id: select2val }, function(data) {
            data = JSON.parse(data);
            var select_html = '<option value="">请选择二级别分类</option>';
            for (var i = 0; i < data.length; i++) {
                select_html += "<option value='" + data[i].id + "'>" + data[i].name + "</option>";
            }
            $('#cat_select2').html(select_html);
        });

        $('#cat_select2').attr('required', true);
    }


});
</script>
<!-- 折线图 -->
<!-- <script language="JavaScript">
$(document).ready(function() {
    var title = {
        text: 'CiteScore趋势'
    };
    var subtitle = {
        text: 'Source: http://www.sciedit.cn/'
    };
    var xAxis = {
        categories: ['2013', '2014', '2015', '2016', '2017']
    };
    var yAxis = {
        title: {
            text: ' '
        }
    };
    var plotOptions = {
        line: {
            dataLabels: {
                enabled: true
            },
            enableMouseTracking: false
        }
    };
    var series = [{
        name: "{$detail.name}",
        data: [
            <?php
         	foreach ($detail['CiteScore_num'] as $key => $value) {
				echo $value.',';
			}
         	?>
        ]
    }];

    var json = {};

    json.title = title;
    json.subtitle = subtitle;
    json.xAxis = xAxis;
    json.yAxis = yAxis;
    json.series = series;
    json.plotOptions = plotOptions;
    $('#container').highcharts(json);
    $('.highcharts-credits').html(' ')
});
</script> -->